<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/style.css">
    <title>KNOT FUN - Samir Abu Safieh</title>
    <link rel="icon" type="image/x-icon" href="images/LogoPlaceHolders512-kopia_2.png">
</head>
<body>

    <!-- Menu -->
    <nav id="menu">
        <a class="nav" href="index.html"><b>HOMEPAGE</b></a>
        <a class="nav" href="resume.html"><b>RESUME</b></a>
        <a class="nav" href="404.html"><b>OTHER</b></a>
        <a class="nav" href="404.html"><b>ABOUT ME</b></a>
    </nav>

    <!-- Project Title -->
    <section id="project-header">
        <h1 class="project-title">KNOT FUN</h1>
        <p class="project-subtitle">Level Designer, 3D Artist, Environment Artist</p>
    </section>

    <!-- NAV MENU -->

    <section id="section-navigation">
        <div class="section-nav-container">
            <div class="section-nav-menu">
                <button class="section-nav-btn" onclick="scrollToSection('overview')">
                    Overview
                </button>
                <button class="section-nav-btn" onclick="scrollToSection('goals-restrictions')">
                    Goals & Restrictions
                </button>
                <button class="section-nav-btn" onclick="scrollToSection('my-workflow')">
                    My Workflow
                </button>
                <button class="section-nav-btn" onclick="scrollToSection('game-showcase')">
                    Play Game
                </button>
                <button class="section-nav-btn" onclick="scrollToSection('project-gallery')">
                    Gallery
                </button>
            </div>
        </div>
    </section>

<script>
// Smooth scroll to section function
function scrollToSection(sectionId) {
    const section = document.getElementById(sectionId);
    if (section) {
        // Calculate offset to account for any fixed headers
        const offset = 80; // Adjust this value based on your needs
        const sectionTop = section.offsetTop - offset;
        
        // Smooth scroll to the section
        window.scrollTo({
            top: sectionTop,
            behavior: 'smooth'
        });
        
        // Add highlight effect
        setTimeout(() => {
            section.classList.add('section-highlight');
            setTimeout(() => {
                section.classList.remove('section-highlight');
            }, 2000);
        }, 500);
    }
}

// Optional: Add active state to navigation buttons based on scroll position
let isScrolling = false;

function updateActiveNavButton() {
    if (isScrolling) return;
    
    const sections = [
        'project-slider',
        'overview', 
        'goals-restrictions',
        'my-workflow',
        'game-showcase',
        'project-gallery'
    ];
    
    const navButtons = document.querySelectorAll('.section-nav-btn');
    const scrollPosition = window.scrollY + 200; // Offset for better detection
    
    sections.forEach((sectionId, index) => {
        const section = document.getElementById(sectionId);
        if (section && navButtons[index]) {
            const sectionTop = section.offsetTop;
            const sectionBottom = sectionTop + section.offsetHeight;
            
            if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                navButtons.forEach(btn => btn.classList.remove('active-section'));
                navButtons[index].classList.add('active-section');
            }
        }
    });
}

// Add scroll listener for active state updates
window.addEventListener('scroll', updateActiveNavButton);

// Add active section styling
const style = document.createElement('style');
style.textContent = `
    .section-nav-btn.active-section {
        background: rgba(255, 111, 60, 0.2) !important;
        border-color: #FF6F3C !important;
        color: #FF6F3C !important;
    }
`;
document.head.appendChild(style);
</script>

    <!-- Project Slider -->
    <section id="project-slider">
        <div class="slider-container">
            <div class="slider-wrapper">
                <img src="images/knotfun1.png" alt="Project Screenshot 1" class="slider-image active">
                <img src="images/knotfun2.png" alt="Project Screenshot 2" class="slider-image">
                <img src="images/knotfun3.png" alt="Project Screenshot 3" class="slider-image">
            </div>
            <div class="slider-controls">
                <button class="slider-btn prev" onclick="changeSlide(-1)">❮</button>
                <div class="slider-dots">
                    <span class="dot active" onclick="currentSlide(1)"></span>
                    <span class="dot" onclick="currentSlide(2)"></span>
                    <span class="dot" onclick="currentSlide(3)"></span>
                </div>
                <button class="slider-btn next" onclick="changeSlide(1)">❯</button>
            </div>
        </div>
    </section>

    <!-- Overview Section -->
    <section id="overview">
        <div class="content-container">
            <h2>OVERVIEW</h2>
            <div class="overview-content">
                <p>KNOT FUN is a twin-stick shooter game that also blends swarm-style gameplay, bullethell combat and roguelike progression, all set in a Wild West atmosphere with a subtle futuristic twist. Designed for local co-op with up to four players, it offers chaotic and engaging fun that's perfect for casual hangouts with friends. My role in the project involved designing all the levels from scratch, developing gameplay concepts, scripting environmental hazards, creating simple 3D models and testing gameplay. The game was shown at the Indie Showcase during the Game Access Conference and is set to release soon on PC via Steam.</p>
                
                <p>As stated above, the game blends swarm-style, bullet hell, and roguelike elements to create a unique co-op experience. With that in mind, my task was to design a level that complements this style of gameplay. Since the game features swarm-style combat, the basic shape of the map should naturally resemble an arena. However, a key gameplay mechanic is that players are connected by a rope, which limits their movement. Therefore, the map needs to be large enough to allow for smooth navigation, but not so large that it removes the challenge of coordination.</p>
                
                <p>A key point to mention is that the team consisted of six people, and I was the sole person fully responsible for level design. We worked on the project over the course of three months, balancing it alongside our jobs and university commitments.</p>
            </div>
        </div>
    </section>

    <!-- Goals and Restrictions -->
    <section id="goals-restrictions">
        <div class="content-container">
            <div class="goals-restrictions-wrapper">
                <div class="goals-section">
                    <h3>GOALS</h3>
                    <ul class="goals-list">
                        <li>Create 3 playable maps with a tutorial concept</li>
                        <li>Design maps to emphasize the mobility limitation caused by the rope mechanic</li>
                        <li>Ensure maps follow an arena-style layout, similar to other swarm-based games</li>
                        <li>Develop a tutorial that introduces simple controls in an engaging and enjoyable way</li>
                        <li>Optimize maps to prevent performance issues, even with a high number of enemies and particle effects</li>
                    </ul>
                </div>
                
                <div class="restrictions-section">
                    <h3>RESTRICTIONS</h3>
                    <ul class="restrictions-list">
                        <li>Limited development time (3 months of after-hours work)</li>
                        <li>Incomplete gameplay loop and missing final player model</li>
                        <li>Budget constraints limited the use of external assets</li>
                        <li>No opportunity to test 3-player gameplay on the created maps</li>
                        <li>Required careful asset placement to avoid obstructing the camera angle</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- My Workflow Section -->
    <section id="my-workflow">
        <div class="content-container">
            <h2>MY WORKFLOW</h2>
            <div class="workflow-container">
                
                <!-- Step 1 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">01</div>
                        <h3 class="step-title">Initial Concept & Planning</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            I began by analyzing the core gameplay mechanics, focusing on how the rope connection between players would affect movement and positioning.
                            To do so, I started by playing or watching popular cooperative games that were in some way similar to my initial goal. I played games like Pummel Party and It Takes Two as examples of how multiplayer games create maps for more than one player, and games like Enter the Gungeon and Risk of Rain to see how arena-type games handle their map creation.
                            The project was a continuation of a game originally made during a 48-hour University Game Jam, so I had some starting materials and a fragment of a gameplay idea that I could use as a foundation for future level design.
                            So here the goal is to create the first level of the game,an arena-style, bullet hell/twin-stick shooter and to design a Level 0 map that would serve as a tutorial.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/start.png" alt="Initial sketches and concepts">
                                <div class="image-title">Starting Point</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/2-tiles-2.png" alt="Gameplay analysis notes">
                                <div class="image-title">Games Inspirations</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/2-tiles.png" alt="Early layout concepts">
                                <div class="image-title">Early Layout Concepts</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">02</div>
                        <h3 class="step-title">Blockout & Prototyping</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            Created basic blockout versions of the levels using simple geometric shapes with the ProBuilder extension in Unity to test player movement and overall level flow. This phase was crucial for identifying potential issues with the rope mechanic, three-player movement collisions, and ensuring adequate space for swarm-style combat while maintaining strategic positioning challenges. During this stage, I also received information about the core player objective(destroying generators) and decided that placing these objectives in corners or narrower areas would create additional challenge and tension for the players.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/blockout-level0.png" alt="Greybox level layout">
                                <div class="image-title"> Saloon HUB Level</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/bar+sandbox-blockout.png" alt="Testing player movement">
                                <div class="image-title"> Saloon + Training Room</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/tutorial concept.png" alt="Early prototype testing">
                                <div class="image-title">Full Tutorial Blockout</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/blockout map 1.png" alt="Iteration process">
                                <div class="image-title"> Arena/Level-1</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">03</div>
                        <h3 class="step-title">Environmental Design & Asset Collection</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            For this step, I conducted research into environments that would best suit the map blockout, focusing on a Space Western aesthetic. One key decision was to initially set aside the space elements and instead create Wild West-style scenes, which could later be reimagined with sci-fi elements through material and color adjustments. Since our team did not have a fully dedicated 3D artist, most of the assets were sourced online, while I also created simple custom assets when suitable ones couldn't be found.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/3-tiles.png" alt="Environmental hazard concepts">
                                <div class="image-title">Environmental Research</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/lowpoly-wildwest.png" alt="Hazard implementation">
                                <div class="image-title">LowPoly Wild-West City Inspiration</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level0.png" alt="Testing hazard mechanics">
                                <div class="image-title">First Look of Saloon Level</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">04</div>
                        <h3 class="step-title">3D Modeling & Asset Creation</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            Created simple 3D models and environmental assets that fit the Wild West aesthetic with futuristic elements. Ensured all assets supported a top-down camera perspective without obstructing gameplay. Additionally, I created new prefabs by combining downloaded assets to expand the variety and functionality of the environment design.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/3-tile-3D.png" alt="3D modeling process">
                                <div class="image-title">My 3D Blender Models</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/dynamite-crate.png" alt="Asset creation workflow">
                                <div class="image-title">Dynamite Crate created from Assets</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/cactus.png" alt="Wild West themed assets">
                                <div class="image-title">Editing existing Models via Blender</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">05</div>
                        <h3 class="step-title">Game Access Indie Showcase version</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            With all of the work and time spent on the previous step, the deadline of June 6th arrived, marking the beginning of the Game Access Indie Showcase. The version of the game presented at the event included two fully functional maps, excluding the Hub and tutorial levels due to time constraints that prevented the implementation of tutorial-related mechanics. Despite these limitations, the showcase version effectively demonstrated the core gameplay experience and visual direction and most importantly, people had fun playing our game, often returning and wanting to play more.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level-1-v1-3.png" alt="Notes">
                                <div class="image-title">Level 1 GA Version</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level2_3tile.png" alt="Changed Map">
                                <div class="image-title">Level 2 GA Version</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level0_3T.png" alt="Changed Map">
                                <div class="image-title">HUB Level Finished Version</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 6 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">06</div>
                        <h3 class="step-title">Feedback Acknowledgment & Adjustments</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            At this stage, the game was presented at the Game Access Indie Showcase in Brno, where we received a large amount of valuable feedback. Key observations included bug reports, collision issues, and some visibility problems. On the positive side, we also identified which features resonated most with players what made them laugh and smile that included: secret paths, pacing, generators placements. All of this feedback was carefully considered and used to guide adjustments and improvements to the existing maps.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/feedback.jpg" alt="Notes">
                                <div class="image-title">Feedback Notes & Analysis</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level1_v2_3T.png" alt="Changed Map">
                                <div class="image-title">New Level 1</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level2_v2_3T.png" alt="Changed Map">
                                <div class="image-title">New Level 2</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 7 -->
                <div class="workflow-step">
                    <div class="step-header">
                        <div class="step-number">07</div>
                        <h3 class="step-title">Future Plans & Development</h3>
                    </div>
                    <div class="step-content">
                        <p class="step-description">
                            The game is still in development and not yet fully finished, with many plans in place for future updates. These include creating a new tutorial to reflect the significant story changes made during mid-development, adding environmental hazards to enhance gameplay variety, and expanding the map pool beyond the current three available levels.
                        </p>
                        <div class="step-gallery">
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/tutorial.png" alt="">
                                <div class="image-title">New Tutorial that fits the newly added lore</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level3_b.png" alt="Performance optimization">
                                <div class="image-title">Level 4 concept</div>
                            </div>
                            <div class="step-image" onclick="openStepLightbox(this)">
                                <img src="images/level3_schema.png" alt="Final iterations">
                                <div class="image-title">Level 4 Basics</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Game Showcase Section -->
    <section id="game-showcase">
        <div class="showcase-container">
            <div class="showcase-header">
                <h2 class="showcase-title">Play KNOT FUN</h2>
            </div>   
            <div class="showcase-content">
                <div class="game-banner-container">
                    <img src="images/knotfun_ban.png" alt="KNOT FUN Game Banner" class="game-banner">
                    <div class="banner-overlay">
                    </div>
                </div>
                
                <a href="https://place-holders.itch.io/knot-fun" target="_blank" rel="noopener noreferrer" class="play-now-btn">
                    <span class="btn-text">Play Now</span>
                    <span class="btn-arrow">→</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Enhanced Project Gallery Section -->
    <section id="project-gallery">
        <div class="gallery-container">
            <div class="gallery-header">
                <h2 class="gallery-title">Project Gallery</h2>
            </div>

            <!-- Gallery Filters -->
            <div class="gallery-filters">
                <button class="filter-btn active" onclick="filterGallery('all')">All</button>
                <button class="filter-btn" onclick="filterGallery('concept')">Concept Art</button>
                <button class="filter-btn" onclick="filterGallery('blockout')">Blockouts</button>
                <!-- <button class="filter-btn" onclick="filterGallery('environment')">Environments</button> -->
                <button class="filter-btn" onclick="filterGallery('final')">Final Levels</button>
                <button class="filter-btn" onclick="filterGallery('assets')">3D Assets</button>
            </div>

            <!-- Gallery Grid -->
            <div class="gallery-grid">
                <!-- Concept Art Images -->
                <div class="gallery-item concept featured" onclick="openEnhancedLightbox(this)">
                    <img src="images/start.png" alt="Starting Point">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Starting Point</div>
                        <div class="gallery-item-description">The original 48-hour game jam version that served as the foundation.</div>
                    </div>
                </div>

                <div class="gallery-item concept" onclick="openEnhancedLightbox(this)">
                    <img src="images/2-tiles.png" alt="Early Layout Concepts">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Early Layout Concepts</div>
                        <div class="gallery-item-description">Initial concepts for arena-style level design.</div>
                    </div>
                </div>

                <!-- Blockout Images -->
                <div class="gallery-item blockout" onclick="openEnhancedLightbox(this)">
                    <img src="images/bar+sandbox-blockout.png" alt="Saloon + Training Room">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Saloon + Training Room</div>
                        <div class="gallery-item-description">Combined layout showing the main saloon area connected to the training sandbox.</div>
                    </div>
                </div>

                <div class="gallery-item blockout" onclick="openEnhancedLightbox(this)">
                    <img src="images/blockout-level0.png" alt="Saloon HUB Level Blockout">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Saloon HUB Level</div>
                        <div class="gallery-item-description">Basic geometric blockout of the central hub area using Unity's ProBuilder extension.</div>
                    </div>
                </div>

                <div class="gallery-item blockout" onclick="openEnhancedLightbox(this)">
                    <img src="images/blockout map 1.png" alt="Arena Level-1 Blockout">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Arena/Level-1</div>
                        <div class="gallery-item-description">First combat arena blockout designed to test rope mechanics and swarm-style gameplay.</div>
                    </div>
                </div>

                <div class="gallery-item blockout featured" onclick="openEnhancedLightbox(this)">
                    <img src="images/tutorial concept.png" alt="Full Tutorial Blockout">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Full Tutorial Blockout</div>
                        <div class="gallery-item-description">Complete tutorial level blockout focusing on teaching basic controls in an engaging way.</div>
                    </div>
                </div>

                <!-- Environment Research -->

                <div class="gallery-item environment" onclick="openEnhancedLightbox(this)">
                    <img src="images/level0.png" alt="First Look Saloon Level">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">First Look of Saloon Level</div>
                        <div class="gallery-item-description">Initial environmental dressing of the saloon level with Wild West themed assets.</div>
                    </div>
                </div>

                <!-- 3D Assets -->
                <div class="gallery-item assets" onclick="openEnhancedLightbox(this)">
                    <img src="images/3-tile-3D.png" alt="3D Blender Models">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">My 3D Blender Models</div>
                        <div class="gallery-item-description">Custom 3D models created in Blender.</div>
                    </div>
                </div>

                <div class="gallery-item assets" onclick="openEnhancedLightbox(this)">
                    <img src="images/dynamite-crate.png" alt="Dynamite Crate Asset">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Dynamite Crate Creation</div>
                        <div class="gallery-item-description">Custom 3D assets created by using downloaded 3D Models.</div>
                    </div>
                </div>

                <div class="gallery-item assets" onclick="openEnhancedLightbox(this)">
                    <img src="images/cactus.png" alt="Edited Cactus Model">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Edited Cactus Models</div>
                        <div class="gallery-item-description">Custom 3D assets created by editing via Blender downloaded 3D Models..</div>
                    </div>
                </div>

                <!-- Game Access Showcase Version -->
                <div class="gallery-item final featured" onclick="openEnhancedLightbox(this)">
                    <img src="images/level-1-v1-3.png" alt="Level 1 GA Version">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Level 1 - Game Access Version</div>
                        <div class="gallery-item-description">The first combat arena as presented at the Game Access Indie Showcase in Brno.</div>
                    </div>
                </div>

                <div class="gallery-item final" onclick="openEnhancedLightbox(this)">
                    <img src="images/level2_3tile.png" alt="Level 2 GA Version">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Level 2 - Game Access Version</div>
                        <div class="gallery-item-description">Second combat arena as presented at the Game Access Indie Showcase in Brno.</div>
                    </div>
                </div>

                <div class="gallery-item final" onclick="openEnhancedLightbox(this)">
                    <img src="images/level0_3T.png" alt="HUB Level Finished">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">HUB Level - Finished Version</div>
                        <div class="gallery-item-description">The completed central hub area where players gather before entering combat arenas.</div>
                    </div>
                </div>


                <div class="gallery-item final" onclick="openEnhancedLightbox(this)">
                    <img src="images/level1_v2_3T.png" alt="New Level 1">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Level 1 - Updated Version</div>
                        <div class="gallery-item-description">Revised first arena incorporating player feedback with alternative paths and enemy flank options.</div>
                    </div>
                </div>

                <div class="gallery-item final" onclick="openEnhancedLightbox(this)">
                    <img src="images/level2_v2_3T.png" alt="New Level 2">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Level 2 - Updated Version</div>
                        <div class="gallery-item-description">Enhanced second arena with improved collision detection and refined environmental design.</div>
                    </div>
                </div>

                <!-- Future Development -->
                <div class="gallery-item concept" onclick="openEnhancedLightbox(this)">
                    <img src="images/tutorial.png" alt="New Tutorial Design">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">New Tutorial Design</div>
                        <div class="gallery-item-description">Redesigned tutorial level concept to accommodate the new lore and story.</div>
                    </div>
                </div>

                <div class="gallery-item concept" onclick="openEnhancedLightbox(this)">
                    <img src="images/level3_b.png" alt="Level 4 Concept">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Level 4 Concept</div>
                        <div class="gallery-item-description">Conceptual schema for future level expansion, exploring new environmental themes and gameplay challenges.</div>
                    </div>
                </div>

                <div class="gallery-item concept" onclick="openEnhancedLightbox(this)">
                    <img src="images/level3_schema.png" alt="Level 4 Basics">
                    <div class="gallery-item-overlay">
                        <div class="gallery-item-title">Level 4 Basic Layout</div>
                        <div class="gallery-item-description">Fundamental layout design for the fourth arena.</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Lightbox -->
    <div id="enhanced-lightbox" class="enhanced-lightbox" onclick="closeEnhancedLightbox()">
        <div class="enhanced-lightbox-content" onclick="event.stopPropagation()">
            <span class="enhanced-lightbox-close" onclick="closeEnhancedLightbox()">&times;</span>
            <img id="enhanced-lightbox-image" src="" alt="">
            <div class="enhanced-lightbox-info">
                <div class="enhanced-lightbox-title" id="enhanced-lightbox-title"></div>
                <div class="enhanced-lightbox-description" id="enhanced-lightbox-description"></div>
            </div>
        </div>
    </div>

    <!-- Step Lightbox for Workflow -->
    <div id="step-lightbox" class="lightbox" onclick="closeStepLightbox()">
        <span class="lightbox-close">&times;</span>
        <img id="step-lightbox-image" src="" alt="Workflow Image">
        <div class="lightbox-nav">
            <button class="lightbox-btn prev" onclick="changeStepLightboxImage(-1, event)">❮</button>
            <button class="lightbox-btn next" onclick="changeStepLightboxImage(1, event)">❯</button>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-copyright">
                © 2025 Samir Abu Safieh. 
            </div>
            <div class="footer-social">
                <a href="https://www.linkedin.com/in/samir-abu-safieh-6640a3305/" target="_blank" rel="noopener noreferrer">
                    <img src="images/linkedin-icon.png" class="linkedin" alt="LinkedIn">
                </a>
                <a href="https://github.com/rrimaS" target="_blank" rel="noopener noreferrer">
                    <img src="images/github-icon.png" alt="GitHub">
                </a>
            </div>
        </div>
    </footer>

    <script>
// Simple Slider functionality
let currentSlideIndex = 0;
const slides = document.querySelectorAll('.slider-image');
const dots = document.querySelectorAll('.dot');

function showSlide(index) {
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));
    
    slides[index].classList.add('active');
    dots[index].classList.add('active');
}

function changeSlide(direction) {
    currentSlideIndex += direction;
    if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
    if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;
    showSlide(currentSlideIndex);
}

function currentSlide(index) {
    currentSlideIndex = index - 1;
    showSlide(currentSlideIndex);
}

// Auto-advance slider
setInterval(() => {
    changeSlide(1);
}, 5000);

// Gallery Filter functionality
function filterGallery(category) {
    const items = document.querySelectorAll('.gallery-item');
    const buttons = document.querySelectorAll('.filter-btn');
    
    // Update active button
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Filter items
    items.forEach(item => {
        if (category === 'all' || item.classList.contains(category)) {
            item.style.display = 'block';
            item.style.animation = 'galleryItemFadeIn 0.6s ease forwards';
        } else {
            item.style.display = 'none';
        }
    });
}

// Enhanced Lightbox functionality
function openEnhancedLightbox(element) {
    const img = element.querySelector('img');
    const title = element.querySelector('.gallery-item-title').textContent;
    const description = element.querySelector('.gallery-item-description').textContent;
    
    const lightbox = document.getElementById('enhanced-lightbox');
    const lightboxImage = document.getElementById('enhanced-lightbox-image');
    const lightboxTitle = document.getElementById('enhanced-lightbox-title');
    const lightboxDescription = document.getElementById('enhanced-lightbox-description');
    
    lightboxImage.src = img.src;
    lightboxImage.alt = img.alt;
    lightboxTitle.textContent = title;
    lightboxDescription.textContent = description;
    
    lightbox.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeEnhancedLightbox() {
    document.getElementById('enhanced-lightbox').style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Step Lightbox functionality - FIXED VERSION
let currentStepLightboxIndex = 0;
let currentStepImages = [];

function openStepLightbox(element) {
    const img = element.querySelector('img');
    const lightbox = document.getElementById('step-lightbox');
    const lightboxImage = document.getElementById('step-lightbox-image');
    
    // Get all images from the current step - FIXED: Get actual image elements, not img tags inside them
    const stepContainer = element.closest('.workflow-step');
    const stepImageContainers = Array.from(stepContainer.querySelectorAll('.step-image'));
    
    // Extract the actual img elements from the containers
    currentStepImages = stepImageContainers.map(container => container.querySelector('img'));
    
    // Find current index within the step - FIXED: Compare src attributes instead of elements
    currentStepLightboxIndex = currentStepImages.findIndex(stepImg => stepImg.src === img.src);
    
    // Fallback if not found
    if (currentStepLightboxIndex === -1) {
        currentStepLightboxIndex = 0;
    }
    
    lightboxImage.src = img.src;
    lightboxImage.alt = img.alt;
    lightbox.style.display = 'flex';
    
    // Prevent body scroll
    document.body.style.overflow = 'hidden';
    
    // Show/hide navigation buttons based on number of images
    const prevBtn = lightbox.querySelector('.lightbox-btn.prev');
    const nextBtn = lightbox.querySelector('.lightbox-btn.next');
    
    if (currentStepImages.length <= 1) {
        if (prevBtn) prevBtn.style.display = 'none';
        if (nextBtn) nextBtn.style.display = 'none';
    } else {
        if (prevBtn) prevBtn.style.display = 'flex';
        if (nextBtn) nextBtn.style.display = 'flex';
    }
}

function closeStepLightbox() {
    document.getElementById('step-lightbox').style.display = 'none';
    document.body.style.overflow = 'auto';
}

function changeStepLightboxImage(direction, event) {
    // FIXED: Prevent event from bubbling up to close the lightbox
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }
    
    // FIXED: Add safety check for empty array
    if (!currentStepImages || currentStepImages.length === 0) {
        return;
    }
    
    currentStepLightboxIndex += direction;
    
    // FIXED: Proper wraparound logic
    if (currentStepLightboxIndex >= currentStepImages.length) {
        currentStepLightboxIndex = 0;
    }
    if (currentStepLightboxIndex < 0) {
        currentStepLightboxIndex = currentStepImages.length - 1;
    }
    
    const lightboxImage = document.getElementById('step-lightbox-image');
    const currentImg = currentStepImages[currentStepLightboxIndex];
    
    // FIXED: Add safety check for current image
    if (currentImg) {
        lightboxImage.src = currentImg.src;
        lightboxImage.alt = currentImg.alt;
    }
}

// Close lightboxes on Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closeStepLightbox();
        closeEnhancedLightbox();
    }
});

// Arrow key navigation for lightboxes
document.addEventListener('keydown', function(event) {
    const stepLightbox = document.getElementById('step-lightbox');
    const enhancedLightbox = document.getElementById('enhanced-lightbox');
    
    // Only handle arrow keys if a lightbox is open
    if (stepLightbox.style.display === 'flex') {
        if (event.key === 'ArrowLeft') {
            event.preventDefault();
            changeStepLightboxImage(-1);
        } else if (event.key === 'ArrowRight') {
            event.preventDefault();
            changeStepLightboxImage(1);
        }
    }
});

// Smooth scroll to gallery when clicking from workflow
function scrollToGallery() {
    document.getElementById('project-gallery').scrollIntoView({
        behavior: 'smooth'
    });
}

// Smooth scroll to overview section
function scrollToOverview() {
    document.getElementById('overview').scrollIntoView({
        behavior: 'smooth'
    });
}
    </script>

</body>
</html>